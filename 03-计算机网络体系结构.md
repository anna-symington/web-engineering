# 计算机网络体系结构
  计算机网络的体系结构是指网络的层次结构以及每一层的功能和服务。最著名的网络体系结构是ISO（国际标准化组织）提出的OSI（开放系统互联）模型和TCP/IP模型。

## OSI模型
  OSI模型是一个七层的网络体系结构模型，从上到下分别是应用层、表示层、会话层、传输层、网络层、数据链路层和物理层。

![03-01](https://github.com/anna-symington/web-engineering/assets/160561460/a68d292d-dcaa-4506-bd89-2a9c2208eb22)

![03-02](https://github.com/anna-symington/web-engineering/assets/160561460/4b055c89-5780-4268-a937-7895457b662b)

头部：
1. **AH**：应用层头部，英文为Application Header。
2. **PH**：表示层头部，英文为Presentation Header。
3. **SH**：会话层头部，英文为Session Header。
4. **TH**：传输层头部，英文为Transmission Header。
5. **NH**：网络层头部，英文为Network Header。
6. **DH**：数据链路层头部，英文为Data Link Header。
头部信息是在数据封装过程中添加的，用于在接收端正确解析和处理数据。

数据单元：
1. **PDU**：协议数据单元，英文为Protocol Data Unit。在OSI模型的上三层（应用层、表示层、会话层）中，数据统一被称为PDU。在不同的层，PDU有不同的名称，如在传输层被称为数据段（Segment），在网络层被称为数据包或数据报文（Packet），在数据链路层被称为数据帧（Frame）。
2. **SDU**：服务数据单元，英文为Service Data Unit。在OSI模型中，层与层之间交换的数据的单位被称为SDU。

  在数据传输过程中，数据会从应用层逐层向下传递，每一层都会添加相应的头部信息，这个过程称为封装。当数据到达目标主机后，会从物理层逐层向上传递，每一层都会去除相应的头部信息，这个过程称为解封装。

### 物理层
  物理层是OSI模型的最底层，它的主要作用是建立网络的双向通讯，为网络的通讯提供一个有保障的通路。物理层的作用就是让数据在一个有保障的环境当中进行双向的传输。物理层首先定义了四个特性的统一：电气特性、功能特性、机械特性、和规程特性。电气特性规定传输二进制比特时线路上所采用的信号的电压高低、匹配阻抗大小、传输速率和距离限制等物理特性，功能特性指代计算机网络传输硬件的各部分的功能，机械特性和规程特性则是为了实现全球通用的标准化。

### 数据链路层

  数据链路层是OSI模型的第二层，它提供了五个主要功能。第一个功能是数据链路的建立、维护和拆除。数据链路层通过Mac地址表来实现数据的转发，从而完成了一个逻辑链路的建立。第二个功能是数据帧的封装、传输和同步。数据链路层负责将数据包封装成数据帧，并进行数据帧的传输和同步。第三个功能是错误检测，数据链路层会对传递的每一个数据进行错误校验和检测，如果检测到数据有错误，它会丢掉这个数据，并通知发送方重传这个数据。第四个功能是流量控制，数据链路层可以配合QoS来实现流量的控制。最后一个功能是提供了通讯当中必须要用到的一个地址，即Mac地址。

### 网络层
  网络层是我们网络工程师要研究的一个主要层次，因为网络层工作着我们的路由器。网络层同样也提供了四个主要功能。第一个功能是提供了逻辑IP地址，这是网络层所提供的重要的通讯地址。第二个功能是连接不同的媒介类型，路由器一边连接企业内网，一边连接企业外网，实现网络的相互通讯。第三个功能是根据运行的不同协议来选择不同的最佳路径，包括RIP、OSPF、ISIS、BGP、IGRP和EIGRP等六种协议。最后一个功能是路由数据包，这其实就是转发的意思，只不过我们在路由器里很少说转发这个词。

**（交换机）*转发* 数据帧**；
**（路由器）*路由* 数据包**

### 传输层

 - 端口号码提供

 传输层在计算机网络中的位置是第四层，它的主要功能是提供端口号码的概念。端口号码是一个非常重要的概念，它可以帮助我们找到服务器上的特定服务。例如，一个服务器可能会提供网站服务、电子邮件服务和文件传输服务等多种服务，而我们需要通过端口号码来确定我们具体需要哪一种服务。
  在这个过程中，有一个组织叫做IANA（国际地址分配委员机构）起到了关键的作用。IANA负责分配数字和地址，包括端口号码。根据IANA的定义，不同的服务会有不同的端口号码。例如，HTTP（超文本传输协议）的端口号是80，HTTPS（安全的超文本传输协议）的端口号是443，SMTP（简单邮件传输协议）的端口号是25，POP3（邮局协议版本3）的端口号是110，FTP（文件传输协议）的端口号是20和21，DNS（域名系统）的端口号是53，等等。

 - 端到端的连接

  除了提供端口号码的概念外，传输层还提供了端到端的连接。这意味着我们可以通过IP和MAC地址找到服务器，然后通过端口号码找到服务器上的特定服务。这是一个非常重要的功能，因为它使我们能够在网络中找到并使用我们需要的服务。
  
  - 传输层的主要协议

  在传输层工作的主要协议有TCP（传输控制协议）和UDP（用户数据报协议）。TCP协议可以保证数据传输的可靠性，因为它有一个重要的三次握手和四次断开机制。这意味着通过TCP传输的数据一定能确保数据的可靠性。然而，TCP的传输效率相对较低。
  与TCP相反，UDP不保证可靠性，但是它的传输效率非常高。因此，TCP和UDP并不存在谁好谁不好的问题，只是它们用在不同的场景，满足不同的需求。例如，有些传输要求传输速度慢一些，但必须保证传输的可靠性，这时候就需要使用TCP协议。而有些传输不需要保证可靠性，只需要传输效率越高越好，这时候就需要使用UDP协议。

  - 数据的检测能力

  传输层还提供了数据的检测能力。这是一个非常重要的功能，因为它可以帮助我们检测数据是否正确，是否有错误。

### 应用层

在传输层之上是应用层，这是网络模型的最后一层。应用层向用户提供了各种应用程序，例如浏览器、电子邮件客户端、文件传输软件等。用户通过使用这些应用程序来使用网络。因此，应用层在用户和网络之间起到了一个用户接口的作用。

总的来说，传输层在计算机网络中起到了非常重要的作用。它提供了端口号码的概念，使我们能够找到并使用网络中的特定服务。它还提供了端到端的连接，使我们能够在网络中找到我们需要的服务。此外，传输层还提供了数据的检测能力，帮助我们检测数据的正确性。最后，应用层向用户提供了各种应用程序，使用户能够使用网络。这些都是传输层的主要功能和作用，希望大家能够记住并理解。

**网络工程师的主要关注点在于OSI七层模型的前四层。后三层（第五层、第六层和第七层）更多地与开发相关。**

### 会话层

会话层的主要功能是在两个应用程序之间进行建立、维护和拆除。例如，当小A同学和小B同学在微信上互为好友时，他们可以通过微信进行通信。在他们发送私信的过程中，应用程序为他们建立了一个独立的房间，他们在这个房间中通话，所说的所有内容都是私密的，其他人无法看到。他们在发微信的过程中，应用程序负责维护这个链接，当他们聊天结束后，应用程序会拆除这个链接。因此，会话层的作用就是负责建立和管理应用程序之间的通信。

### 表示层

表示层的功能比较多，其中一个功能是在不同的系统之间解决通讯语法问题。例如，现在很多用户不再只使用Windows系统，而是开始使用苹果的Mac OS系统。然而，不同的系统发送数据的语法可能是不一样的，表示层就负责帮助他们解决语法的通讯问题。你可以将表示层理解为一个翻译，它负责协调两边的通讯，让他们能够正常通讯。

表示层的另一个功能是提供数据加密。现在比较主流的加密方法有三种：

1. **对称加密**：加密方和解密方使用一把完全相同的密钥。例如，我妈妈在出门时用一把钥匙锁上家门，我爸爸回家时用同一把钥匙打开家门。

2. **非对称加密**：每个人都有一把私钥和一把公钥。私钥只有自己知道，而公钥可以给任何人。如果小王想把一个数据加密发给小张，他就用小张的公钥加密这个数据。只有小张的私钥能解开这个数据。

3. **哈希加密**：哈希加密有四个重要的优势。首先，它加密后的数据长度是定长的，无论你是加密一个数字，还是一本康熙词典，加密后的长度都是256位。其次，哈希加密的速度非常快。第三，哈希加密是一个不可逆的运算，也就是说，你可以用一个榨汁机把一个橙子变成一杯橙汁，但是你永远不可能用这个榨汁机把橙汁变成橙子。最后，哈希的碰撞率极低，也就是说，加密两个完全不同的数据得到一样的结果的可能性微乎其微。

### 应用层

应用层向用户提供了各种应用程序，例如浏览器、迅雷、百度网盘等。用户通过使用这些应用程序来使用网络。因此，应用层在用户和网络之间起到了一个用户接口的作用。

![03-03](https://github.com/anna-symington/web-engineering/assets/160561460/8a105f6b-f649-492c-a706-d5931fd839e4)

![03-04](https://github.com/anna-symington/web-engineering/assets/160561460/b8d0861b-50d4-49fe-affb-508e7136b9db)

![03-05](https://github.com/anna-symington/web-engineering/assets/160561460/4fd635a4-1217-4e3b-82e6-ec0c0503acb6)

![03-06](https://github.com/anna-symington/web-engineering/assets/160561460/d4cad263-3481-4005-9f33-ee211e3c6c16)

## TCP/IP模型
  OSI模型每一层都有其特定的功能和协议。然而，OSI模型的定义过于详细，使得在实际工作中使用起来较为复杂。

  为了解决OSI模型的问题，人们提出了TCP/IP模型。这个模型可以按照四层或五层进行划分。
  
  - 如果按照五层划分，那就是将OSI模型的上三层（会话层、表示层和应用层）合并成一层，称为应用层，其他层保持不变。
  - 如果按照四层划分，那就是将应用层保持不变，传输层保持不变，网络层改名为互联网层，数据链路层和物理层合并为网络接口层。

![03-07](https://github.com/anna-symington/web-engineering/assets/160561460/d53ac2d5-84d1-4727-953b-a4d65ce4e224)

![03-08](https://github.com/anna-symington/web-engineering/assets/160561460/4f0c9917-7f56-463b-a9f1-123ca9cd7cf5)
